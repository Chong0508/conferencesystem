<div class="container mt-4 animate__animated animate__fadeIn">

  <div class="d-flex justify-content-between align-items-end mb-5">
    <div>
      <h2 class="fw-bold text-dark mb-1">Review History</h2>
      <p class="text-muted mb-0">A complete log of papers you have evaluated.</p>
    </div>

    <div class="d-flex gap-3">
      <div class="bg-white px-3 py-2 rounded-3 shadow-sm border text-center">
        <span class="d-block x-small text-muted fw-bold text-uppercase">Reviewed</span>
        <span class="fw-bold text-dark">{{ historyList.length }}</span>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-teal" role="status"></div>
    <p class="text-muted mt-3 small fw-bold">Loading history...</p>
  </div>

  <div *ngIf="!isLoading && historyList.length === 0" class="text-center py-5 bg-white rounded-4 shadow-sm border border-dashed">
    <div class="mb-4">
      <div class="icon-circle bg-light text-muted mx-auto">
        <i class="bi bi-journal-album display-4"></i>
      </div>
    </div>
    <h4 class="fw-bold text-dark">No Reviews Yet</h4>
    <p class="text-muted mb-4">You haven't completed any evaluations.</p>
    <button class="btn btn-teal px-4 py-2 fw-bold shadow-sm" routerLink="/dashboard/reviews">
      Check Pending Tasks
    </button>
  </div>

  <div class="d-flex flex-column gap-3" *ngIf="!isLoading && historyList.length > 0">

    <div *ngFor="let item of historyList" class="card border-0 shadow-sm rounded-4 hover-card overflow-hidden">
      <div class="card-body p-4">
        <div class="row align-items-center">

          <div class="col-md-5 mb-3 mb-md-0">
            <div class="d-flex align-items-start">
              <div class="icon-square bg-light text-secondary rounded-3 me-3 flex-shrink-0 d-none d-md-flex">
                <i class="bi bi-file-earmark-check fs-5"></i>
              </div>
              <div>
                <h6 class="fw-bold text-dark mb-1">{{ item.paperTitle }}</h6>
                <div class="d-flex align-items-center gap-3 mt-2">
                  <span class="badge bg-light text-secondary border fw-normal px-2">ID: {{ item.paperId }}</span>
                  <span class="text-muted x-small">
                    <i class="bi bi-calendar3 me-1"></i> {{ item.date | date:'mediumDate' }}
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-3 text-md-center mb-3 mb-md-0">
            <span class="badge rounded-pill px-3 py-2 fw-bold d-inline-flex align-items-center"
                  [ngClass]="{
                    'bg-success-subtle text-success border-success': item.recommendation === 'Accept',
                    'bg-danger-subtle text-danger border-danger': item.recommendation === 'Reject'
                  }">
              <i class="bi me-2" [ngClass]="item.recommendation === 'Accept' ? 'bi-check-circle-fill' : 'bi-x-circle-fill'"></i>
              {{ item.recommendation }}
            </span>
          </div>

          <div class="col-md-2 text-md-center mb-3 mb-md-0 border-start border-end">
            <div class="d-flex flex-column align-items-center justify-content-center">
              <span class="display-6 fw-bold score-text" [ngClass]="getScoreColor(item.score)">
                {{ item.score }}
              </span>
              <span class="text-muted x-small text-uppercase fw-bold">Score</span>
            </div>
          </div>

          <div class="col-md-2 text-md-end">
            <button class="btn btn-outline-dark rounded-pill px-4 btn-sm fw-bold w-100" (click)="viewReview(item.paperId)">
              View Details
            </button>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
